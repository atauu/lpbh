// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(cuid())
  username      String   @unique
  password      String
  rutbe         String? // RÃ¼tbe
  isim          String? // Ä°sim
  soyisim       String? // Soyisim
  tckn          String? // TC Kimlik No
  telefon       String? // Telefon numarasÄ±
  evAdresi      String?  @map("ev_adresi") // Ev adresi
  yakiniIsmi    String?  @map("yakini_ismi") // YakÄ±nÄ± ismi
  yakiniTelefon String?  @map("yakini_telefon") // YakÄ±nÄ± telefon numarasÄ±
  ruhsatSeriNo  String?  @map("ruhsat_seri_no") // Ruhsat seri no
  kanGrubu      String?  @map("kan_grubu") // Kan grubu
  plaka         String? // Plaka numarasÄ±
  ehliyetTuru   String[] @default([]) @map("ehliyet_turu") // Ehliyet tÃ¼rleri array

  // Ãœyelik durumu
  membershipStatus  String  @default("pending_info") @map("membership_status") // "pending_info" | "pending_approval" | "approved" | "rejected"
  registrationToken String? @unique @map("registration_token") // Bilgilerini girmek iÃ§in token

  // 2FA (Microsoft Authenticator) alanlarÄ±
  twoFactorSecret  String? @map("two_factor_secret") // TOTP secret key
  twoFactorEnabled Boolean @default(false) @map("two_factor_enabled") // 2FA aktif mi?

  // Sistem gÃ¶revlisi
  isSystemAdmin Boolean @default(false) @map("is_system_admin") // Sistem gÃ¶revlisi mi?

  // Online durumu
  lastActiveAt DateTime? @map("last_active_at") // Son aktif zaman

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // NextAuth iÃ§in gerekli alanlar
  accounts Account[]
  sessions Session[]

  // ToplantÄ± kayÄ±tlarÄ± iliÅŸkisi
  meetingAttendances MeetingAttendance[]
  // Etkinlikler iliÅŸkisi
  events             Event[]
  // Etkinlik katÄ±lÄ±mlarÄ± iliÅŸkisi
  eventAttendances   EventAttendance[]
  // GÃ¶revlendirmeler iliÅŸkileri
  assignedTasks      Assignment[]        @relation("Assignee") // Kendisine atanan gÃ¶revler
  assignedByMe       Assignment[]        @relation("Assigner") // Kendisinin atadÄ±ÄŸÄ± gÃ¶revler
  // Rotalar iliÅŸkisi
  routes             Route[]             @relation("RouteCreator") // OluÅŸturduÄŸu rotalar
  // Duyurular iliÅŸkisi
  announcements      Announcement[]      @relation("AnnouncementCreator") // OluÅŸturduÄŸu duyurular
  // Ä°ÅŸlem kayÄ±tlarÄ± iliÅŸkisi
  activityLogs       ActivityLog[]
  // AraÅŸtÄ±rmalar iliÅŸkisi
  researches         Research[]
  // Mesajlar iliÅŸkisi
  messages           Message[]
  // Okundu bilgileri iliÅŸkisi
  readStatuses       ReadStatus[]
  // Mesaj reaksiyonlarÄ±
  messageReactions   MessageReaction[]
  // Okundu bilgileri (mesajlar iÃ§in)
  readReceipts       ReadReceipt[]
  // YÄ±ldÄ±zlÄ± mesajlar
  starredMessages    StarredMessage[]
  // SabitlediÄŸi mesajlar
  pinnedMessages     Message[]           @relation("PinnedMessages")
  // Ã–zel mesajlar (gÃ¶nderilen)
  privateMessages    Message[]           @relation("PrivateMessages")
  // Ã‡aÄŸrÄ±lar (baÅŸlatan)
  callerCalls        Call[]              @relation("CallerCalls")
  // Ã‡aÄŸrÄ±lar (alan)
  receiverCalls      Call[]              @relation("ReceiverCalls")

  // Oylamalar & Belgeler
  pollsCreated       Poll[]        @relation("PollCreator")
  pollOptionsCreated PollOption[]  @relation("PollOptionCreator")
  pollVotes          PollVote[]
  documentsUploaded  Document[]    @relation("DocumentUploader")

  @@map("users")
}

// NextAuth.js iÃ§in gerekli modeller
model Account {
  id                String  @id @default(cuid())
  userId            String  @map("user_id")
  type              String
  provider          String
  providerAccountId String  @map("provider_account_id")
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique @map("session_token")
  userId       String   @map("user_id")
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
  @@map("verification_tokens")
}

// ToplantÄ± KayÄ±tlarÄ±
model Meeting {
  id          String   @id @default(cuid())
  title       String // ToplantÄ± baÅŸlÄ±ÄŸÄ±/konusu
  meetingDate DateTime @map("meeting_date") // ToplantÄ± tarihi
  filePath    String   @map("file_path") // PDF dosya yolu
  fileName    String   @map("file_name") // Orijinal dosya adÄ±
  fileSize    Int      @map("file_size") // Dosya boyutu (bytes)
  content     String?  @db.Text // PDF iÃ§eriÄŸi (arama iÃ§in)
  visibility  String   @default("herkes") // "yÃ¶netim" | "member" | "herkes"
  uploadedBy  String   @map("uploaded_by") // YÃ¼kleyen kullanÄ±cÄ± ID
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  attendances MeetingAttendance[]

  @@map("meetings")
}

// ToplantÄ±ya katÄ±lÄ±m kayÄ±tlarÄ±
model MeetingAttendance {
  id        String  @id @default(cuid())
  meetingId String  @map("meeting_id")
  userId    String  @map("user_id")
  attended  Boolean @default(true) // KatÄ±ldÄ± mÄ±?

  meeting Meeting @relation(fields: [meetingId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")

  @@unique([meetingId, userId])
  @@map("meeting_attendances")
}

model Event {
  id          String   @id @default(cuid())
  title       String // Etkinlik adÄ±
  eventDate   DateTime @map("event_date") // Etkinlik tarihi
  location    String   @db.Text // Lokasyon (adres)
  locationUrl String?  @map("location_url") @db.Text // Google Maps link veya embed URL
  description String?  @db.Text // Etkinlik detaylarÄ± (opsiyonel)
  plannedBy   String   @map("planned_by") // Planlayan kullanÄ±cÄ± ID
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  planner     User              @relation(fields: [plannedBy], references: [id], onDelete: Cascade)
  attendances EventAttendance[] // Etkinlik katÄ±lÄ±mlarÄ±

  @@map("events")
}

model EventAttendance {
  id        String   @id @default(cuid())
  eventId   String   @map("event_id")
  userId    String   @map("user_id")
  status    String // 'attending' | 'not_attending' | null (cevapsÄ±z)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  event Event @relation(fields: [eventId], references: [id], onDelete: Cascade)
  user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([eventId, userId])
  @@map("event_attendances")
}

model Assignment {
  id               String    @id @default(cuid())
  assignerId       String    @map("assigner_id") // GÃ¶revlendiren kullanÄ±cÄ± ID
  assigneeId       String    @map("assignee_id") // GÃ¶revlendirilen kullanÄ±cÄ± ID
  task             String    @db.Text // GÃ¶rev aÃ§Ä±klamasÄ±
  issueDate        DateTime  @map("issue_date") // GÃ¶rev ibraz tarihi
  expectedDelivery DateTime  @map("expected_delivery") // Beklenilen teslim tarihi
  actualDelivery   DateTime? @map("actual_delivery") // GerÃ§ek teslim tarihi (null olabilir)
  status           String    @default("pending") // 'pending' | 'completed' | 'cancelled'
  visibility       String    @default("herkes") // "yÃ¶netim" | "member" | "herkes"
  details          String?   @db.Text // GÃ¶rev detaylarÄ±
  files            String[] // Dosya yollarÄ± array
  createdAt        DateTime  @default(now()) @map("created_at")
  updatedAt        DateTime  @updatedAt @map("updated_at")

  assigner User @relation("Assigner", fields: [assignerId], references: [id], onDelete: Cascade)
  assignee User @relation("Assignee", fields: [assigneeId], references: [id], onDelete: Cascade)

  @@map("assignments")
}

model Route {
  id         String   @id @default(cuid())
  name       String // Rota ismi
  startPoint String   @map("start_point") // KalkÄ±ÅŸ noktasÄ±
  endPoint   String   @map("end_point") // VarÄ±ÅŸ noktasÄ±
  url        String   @db.Text // Google Maps directions URL
  waypoints  Json // Duraklar array: [{name: string, googleMapsLink: string | null}]
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")
  createdBy  String   @map("created_by") // OluÅŸturan kullanÄ±cÄ± ID

  creator User @relation("RouteCreator", fields: [createdBy], references: [id], onDelete: Cascade)

  @@map("routes")
}

// Oylamalar
model Poll {
  id                String       @id @default(cuid())
  title             String
  description       String?      @db.Text
  type              String                      // 'yes_no' | 'multiple'
  allowCustomOption Boolean     @default(false) @map("allow_custom_option")
  visibility        String      @default("herkes") // "yÃ¶netim" | "member" | "herkes"
  createdBy         String      @map("created_by")
  createdAt         DateTime    @default(now()) @map("created_at")
  updatedAt         DateTime    @updatedAt @map("updated_at")

  creator           User        @relation("PollCreator", fields: [createdBy], references: [id], onDelete: Cascade)
  options           PollOption[]
  votes             PollVote[]

  @@map("polls")
}

model PollOption {
  id        String   @id @default(cuid())
  pollId    String   @map("poll_id")
  text      String   @db.Text
  createdBy String?  @map("created_by") // null: sistem tarafÄ±ndan eklenen (Ã¶r: evet/hayÄ±r)
  createdAt DateTime @default(now()) @map("created_at")

  poll      Poll     @relation(fields: [pollId], references: [id], onDelete: Cascade)
  creator   User?    @relation("PollOptionCreator", fields: [createdBy], references: [id], onDelete: Cascade)
  votes     PollVote[]

  @@unique([pollId, text])
  @@unique([pollId, createdBy])
  @@map("poll_options")
}

model PollVote {
  id        String   @id @default(cuid())
  pollId    String   @map("poll_id")
  optionId  String   @map("option_id")
  userId    String   @map("user_id")
  createdAt DateTime @default(now()) @map("created_at")

  poll      Poll      @relation(fields: [pollId], references: [id], onDelete: Cascade)
  option    PollOption @relation(fields: [optionId], references: [id], onDelete: Cascade)
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([pollId, userId])
  @@map("poll_votes")
}

// Belgeler (toplantÄ± kayÄ±tlarÄ±na benzer, katÄ±lÄ±mcÄ± ve tarih planlamasÄ± yok)
model Document {
  id         String   @id @default(cuid())
  title      String
  description String? @db.Text
  filePath   String   @map("file_path")
  fileName   String   @map("file_name")
  fileSize   Int      @map("file_size")
  content    String?  @db.Text          // PDF iÃ§erik metni (arama iÃ§in)
  visibility String   @default("herkes") // \"yÃ¶netim\" | \"member\" | \"herkes\"
  uploadedBy String   @map("uploaded_by")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")

  uploader   User     @relation("DocumentUploader", fields: [uploadedBy], references: [id], onDelete: Cascade)

  @@map("documents")
}

// RÃ¼tbe GruplarÄ±
model RoleGroup {
  id          String    @id @default(cuid())
  name        String    @unique // Grup adÄ± (Ã¶rn: "YÃ¶netim", "Member", "Aday")
  description String?   @db.Text // AÃ§Ä±klama
  order       Int       @default(0) // SÄ±ralama (0: Aday, 1: Member, 2: YÃ¶netim)
  roles       Role[] // Bu gruba ait rÃ¼tbeler
  messages    Message[] // Bu gruba ait mesajlar
  calls       Call[] // Bu gruba ait Ã§aÄŸrÄ±lar
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@map("role_groups")
}

// RÃ¼tbe (Role) ve Yetkilendirme
model Role {
  id          String   @id @default(cuid())
  name        String   @unique // RÃ¼tbe adÄ± (Ã¶rn: "PRESIDENT", "MEMBER")
  description String?  @db.Text // AÃ§Ä±klama
  groupId     String?  @map("group_id") // Grup ID (opsiyonel)
  permissions Json // Ä°zinler: { users: {create, read, update, delete}, meetings: {...}, events: {...}, assignments: {...}, routes: {...}, announcements: {...} }
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  group RoleGroup? @relation(fields: [groupId], references: [id], onDelete: SetNull)

  @@map("roles")
}

// Duyurular
model Announcement {
  id           String    @id @default(cuid())
  title        String // Duyuru baÅŸlÄ±ÄŸÄ±
  content      String    @db.Text // Duyuru iÃ§eriÄŸi
  visibility   String // "yÃ¶netim" | "member" | "herkes"
  importance   String    @default("normal") // "dÃ¼ÅŸÃ¼k" | "normal" | "yÃ¼ksek"
  createdBy    String    @map("created_by") // OluÅŸturan kullanÄ±cÄ± ID
  scheduledAt  DateTime? @map("scheduled_at") // PlanlÄ± yayÄ±n tarihi ve saati
  notifyBefore Boolean   @default(false) @map("notify_before") // Haber ver seÃ§eneÄŸi
  status       String    @default("published") // "published" | "scheduled"
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")

  creator User @relation("AnnouncementCreator", fields: [createdBy], references: [id], onDelete: Cascade)

  @@map("announcements")
}

// Ä°ÅŸlem KayÄ±tlarÄ± (Activity Log)
model ActivityLog {
  id          String   @id @default(cuid())
  userId      String   @map("user_id") // Ä°ÅŸlemi yapan kullanÄ±cÄ± ID
  action      String // Ä°ÅŸlem tÃ¼rÃ¼ (Ã¶rn: "login_success", "login_failed", "profile_update", vb.)
  description String   @db.Text // TÃ¼rkÃ§e aÃ§Ä±klama
  ipAddress   String?  @map("ip_address") // IP adresi (opsiyonel)
  userAgent   String?  @map("user_agent") @db.Text // User agent (opsiyonel)
  metadata    Json? // Ek veriler (Ã¶rnek: { reason: "..." })
  createdAt   DateTime @default(now()) @map("created_at")

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([action])
  @@index([createdAt])
  @@map("activity_logs")
}

// AraÅŸtÄ±rmalar
model Research {
  id          String   @id @default(cuid())
  title       String // BaÅŸlÄ±k
  content     String   @db.Text // Ä°Ã§erik
  filePath    String?  @map("file_path") // Dosya yolu (opsiyonel)
  fileName    String?  @map("file_name") // Dosya adÄ± (opsiyonel)
  fileSize    Int?     @map("file_size") // Dosya boyutu (opsiyonel)
  fileContent String?  @map("file_content") @db.Text // Dosya iÃ§eriÄŸi (PDF arama iÃ§in)
  createdBy   String   @map("created_by") // OluÅŸturan kullanÄ±cÄ± ID
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  creator User @relation(fields: [createdBy], references: [id], onDelete: Cascade)

  @@index([createdBy])
  @@index([createdAt])
  @@map("researches")
}

// Mesajlar (Sohbet)
model Message {
  id                    String    @id @default(cuid())
  type                  String    @default("text") // "text" | "image" | "video" | "audio" | "location" | "live_location" | "document" | "file"
  content               String?   @db.Text // Mesaj iÃ§eriÄŸi (metin mesajlar iÃ§in)
  mediaPath             String?   @map("media_path") // Medya dosya yolu (fotoÄŸraf, video, ses, dosya)
  mediaUrl              String?   @map("media_url") // Medya URL'i (opsiyonel)
  fileName              String?   @map("file_name") // Dosya adÄ± (dokÃ¼man/dosya iÃ§in)
  fileSize              Int?      @map("file_size") // Dosya boyutu (bytes)
  fileType              String?   @map("file_type") // Dosya tipi/MIME type
  latitude              Float? // Konum enlemi
  longitude             Float? // Konum boylamÄ±
  locationName          String?   @map("location_name") @db.Text // Konum adÄ±
  liveLocationExpiresAt DateTime? @map("live_location_expires_at") // CanlÄ± konum sÃ¼resi dolma zamanÄ±
  repliedToId           String?   @map("replied_to_id") // YanÄ±tlanan mesaj ID (opsiyonel)
  forwardedFromId       String?   @map("forwarded_from_id") // Ä°letilen mesaj ID (opsiyonel)
  senderId              String    @map("sender_id") // GÃ¶nderen kullanÄ±cÄ± ID
  groupId               String?   @map("group_id") // RÃ¼tbe grubu ID (null = LPBH/HERKES)
  pinned                Boolean   @default(false) // Sabitlendi mi?
  pinnedAt              DateTime? @map("pinned_at") // Sabitleme zamanÄ±
  pinnedBy              String?   @map("pinned_by") // Sabitleyen kullanÄ±cÄ± ID
  editedAt              DateTime? @map("edited_at") // DÃ¼zenleme zamanÄ±
  expiresAt             DateTime? @map("expires_at") // SÃ¼reli mesaj - otomatik silinme zamanÄ±
  selfDestruct          Boolean   @default(false) @map("self_destruct") // SÃ¼reli mesaj mÄ±?
  selfDestructSeconds   Int?      @map("self_destruct_seconds") // SÃ¼reli mesaj kaÃ§ saniye sonra silinecek (5s, 10s, 30s, 1m, 1h, 1d, 1w)
  recipientId           String?   @map("recipient_id") // Ã–zel mesaj alÄ±cÄ± ID (null = grup mesajÄ±)
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")
  deletedAt             DateTime? @map("deleted_at") // Silinen mesajlar iÃ§in soft delete

  sender            User              @relation(fields: [senderId], references: [id], onDelete: Cascade)
  group             RoleGroup?        @relation(fields: [groupId], references: [id], onDelete: SetNull)
  repliedTo         Message?          @relation("MessageReplies", fields: [repliedToId], references: [id], onDelete: SetNull)
  replies           Message[]         @relation("MessageReplies")
  forwardedFrom     Message?          @relation("MessageForwards", fields: [forwardedFromId], references: [id], onDelete: SetNull)
  forwardedMessages Message[]         @relation("MessageForwards")
  pinnedByUser      User?             @relation("PinnedMessages", fields: [pinnedBy], references: [id], onDelete: SetNull)
  recipient         User?             @relation("PrivateMessages", fields: [recipientId], references: [id], onDelete: Cascade)
  reactions         MessageReaction[]
  readReceipts      ReadReceipt[]
  starredBy         StarredMessage[]

  @@index([senderId])
  @@index([createdAt])
  @@index([type])
  @@index([groupId])
  @@index([pinned])
  @@index([forwardedFromId])
  @@index([recipientId])
  @@index([expiresAt])
  @@index([selfDestruct])
  @@map("messages")
}

// Mesaj ReaksiyonlarÄ±
model MessageReaction {
  id        String   @id @default(cuid())
  messageId String   @map("message_id")
  userId    String   @map("user_id")
  emoji     String // Reaksiyon emoji (ğŸ‘, â¤ï¸, ğŸ˜‚, etc.)
  createdAt DateTime @default(now()) @map("created_at")

  message Message @relation(fields: [messageId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([messageId, userId, emoji])
  @@index([messageId])
  @@index([userId])
  @@map("message_reactions")
}

// Okundu Bilgileri (Mesajlar iÃ§in)
model ReadReceipt {
  id        String   @id @default(cuid())
  messageId String   @map("message_id")
  userId    String   @map("user_id")
  readAt    DateTime @default(now()) @map("read_at")

  message Message @relation(fields: [messageId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([messageId, userId])
  @@index([messageId])
  @@index([userId])
  @@index([readAt])
  @@map("read_receipts")
}

// YÄ±ldÄ±zlÄ± Mesajlar
model StarredMessage {
  id        String   @id @default(cuid())
  messageId String   @map("message_id")
  userId    String   @map("user_id")
  createdAt DateTime @default(now()) @map("created_at")

  message Message @relation(fields: [messageId], references: [id], onDelete: Cascade)
  user    User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([messageId, userId])
  @@index([messageId])
  @@index([userId])
  @@map("starred_messages")
}

// Okundu Bilgileri
model ReadStatus {
  id        String   @id @default(cuid())
  eventType String   @map("event_type") // "meeting" | "event" | "assignment" | "announcement" | "research"
  eventId   String   @map("event_id") // Event ID (meeting, event, assignment, announcement, research)
  userId    String   @map("user_id") // Okuyan kullanÄ±cÄ± ID
  readAt    DateTime @default(now()) @map("read_at") // Okuma tarihi

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([eventType, eventId, userId])
  @@index([eventType, eventId])
  @@index([userId])
  @@index([readAt])
  @@map("read_statuses")
}

// Ã‡aÄŸrÄ±lar (Voice/Video Calls)
model Call {
  id         String    @id @default(cuid())
  callerId   String    @map("caller_id") // Arayan kullanÄ±cÄ± ID
  receiverId String    @map("receiver_id") // Aranan kullanÄ±cÄ± ID (one-to-one iÃ§in)
  groupId    String?   @map("group_id") // Grup ID (group call iÃ§in)
  type       String // "audio" | "video"
  status     String    @default("pending") // "pending" | "ringing" | "active" | "ended" | "missed" | "rejected"
  startedAt  DateTime? @map("started_at") // BaÅŸlama zamanÄ±
  endedAt    DateTime? @map("ended_at") // Bitme zamanÄ±
  duration   Int? // Saniye cinsinden sÃ¼re
  createdAt  DateTime  @default(now()) @map("created_at")
  updatedAt  DateTime  @updatedAt @map("updated_at")

  caller   User       @relation("CallerCalls", fields: [callerId], references: [id], onDelete: Cascade)
  receiver User       @relation("ReceiverCalls", fields: [receiverId], references: [id], onDelete: Cascade)
  group    RoleGroup? @relation(fields: [groupId], references: [id], onDelete: SetNull)

  @@index([callerId])
  @@index([receiverId])
  @@index([groupId])
  @@index([status])
  @@index([createdAt])
  @@map("calls")
}

model SystemSettings {
  id        String   @id @default(cuid())
  key       String   @unique // Setting key (e.g., "twoFactorEnabled")
  value     String // Setting value (JSON string for complex values)
  updatedBy String?  @map("updated_by") // User ID who updated this setting
  updatedAt DateTime @updatedAt @map("updated_at")
  createdAt DateTime @default(now()) @map("created_at")

  @@map("system_settings")
}
